# Frazer Functionality Replication Notes

## Environment Constraints
- The original Windows desktop executable `frazer.exe` referenced at `C:\\Frazer30` cannot be executed inside this Linux-based container. To replicate functionality we rely on the rewritten .NET API (`frazer-api`) and Ionic/Angular UI (`frazer-ui`) projects included in this repository. These services can be run locally to approximate the Frazer experience without the legacy binary.

## Application Capabilities Covered by the Rewrite
- **Authentication & Authorization** – The API exposes a role-driven login flow that issues JWT tokens and assigns roles such as Admin, Manager, Sales, Clerk, and Service, enabling gated access similar to the desktop product.【F:frazer-api/src/Infrastructure/Auth/FakeAuthService.cs†L9-L48】【F:frazer-api/src/Api/Program.cs†L47-L135】
- **Inventory Management** – Vehicles include VIN, stock number, trim, pricing, and sale linkage, with services for listing, CRUD operations, and marking units as sold. Photo management enforces a single primary image per vehicle, mirroring dealer lot workflows.【F:frazer-api/src/Domain/Entities/Vehicle.cs†L3-L22】【F:frazer-api/src/Infrastructure/Services/FakeDomainServices.cs†L20-L260】
- **Customer & Prospect CRM** – Customer records capture contact and address details, while prospects link interest to vehicles; both include list, detail, and creation/update workflows.【F:frazer-api/src/Domain/Entities/Customer.cs†L3-L15】【F:frazer-api/src/Domain/Entities/Prospect.cs†L3-L11】【F:frazer-api/src/Infrastructure/Services/FakeDomainServices.cs†L263-L404】
- **Sales, Fees, and Receipts** – Sales track vehicle/customer associations, financial totals, fees, payments, and balance due, and can return printable receipt detail. Fee configuration stubs allow managing dealership fee schedules.【F:frazer-api/src/Domain/Entities/Sale.cs†L3-L27】【F:frazer-api/src/Infrastructure/Services/FakeDomainServices.cs†L407-L589】
- **Insurance & Compliance Tracking** – Insurance providers can be listed and upserted with active flags and contact metadata to support titling and compliance tasks.【F:frazer-api/src/Domain/Entities/InsuranceProvider.cs†L3-L11】【F:frazer-api/src/Infrastructure/Services/FakeDomainServices.cs†L593-L637】
- **Payments Dashboard** – Payments store settlement status, method, timestamps, and external references, and the dashboard aggregates recent activity ready for integration with a gateway.【F:frazer-api/src/Domain/Entities/Payment.cs†L3-L21】【F:frazer-api/src/Infrastructure/Services/FakeDomainServices.cs†L640-L663】
- **Reporting** – Inventory, titles pending, and insurance summary reports project dealership KPIs that the legacy system exposed, with filtering support for customer-focused work queues.【F:frazer-api/src/Infrastructure/Services/FakeDomainServices.cs†L666-L712】
- **Job Automation** – Background job scheduling, history, and ad-hoc triggers are provided through Hangfire-backed services and API endpoints, covering nightly fee application, backups, and data sync routines.【F:frazer-api/src/Infrastructure/Jobs/HangfireRecurringJobScheduler.cs†L1-L23】【F:frazer-api/src/Infrastructure/Services/FakeDomainServices.cs†L714-L762】
- **Modern UI Shell** – The Ionic dashboard and fixtures offer the Frazer desktop’s core views—inventory metrics, sales progress, payments, jobs, and reports—ready to be wired to live API endpoints.【F:frazer-ui/src/app/dashboard/dashboard.page.html†L1-L69】【F:frazer-ui/src/app/data/fixtures.ts†L16-L170】

## External Integrations & Data Contracts
- **FrazerHub Inventory Syndication** – `IFrazerHubClient.PushInventoryAsync` syncs local vehicles (VIN, stock, pricing, photos) to an external listing service. The fake adapter currently logs against a configurable base URL, so a production provider must supply an HTTPS endpoint accepting batched inventory payloads.【F:frazer-api/src/Application/Interfaces/Adapters/IFrazerHubClient.cs†L1-L6】【F:frazer-api/src/Infrastructure/Adapters/FakeAdapters.cs†L7-L22】【F:frazer-api/src/Infrastructure/Adapters/AdapterOptions.cs†L3-L32】【F:frazer-api/src/Api/appsettings.json†L23-L26】
- **Text Messaging (TextMaxx)** – Outbound SMS requires a provider that accepts destination phone numbers and message bodies; the adapter uses an API key loaded from configuration and should be replaced with a gateway that supports dealer compliance logging.【F:frazer-api/src/Application/Interfaces/Adapters/ITextMaxxSms.cs†L1-L6】【F:frazer-api/src/Infrastructure/Adapters/FakeAdapters.cs†L25-L41】【F:frazer-api/src/Api/appsettings.json†L27-L29】
- **SiriusXM Trial Activation** – Dealers register sold VINs for satellite radio trials. The integration surface passes the VIN plus API credentials; a production SiriusXM or equivalent provider must accept vehicle identifiers and respond with enrollment confirmation.【F:frazer-api/src/Application/Interfaces/Adapters/ISiriusXmApi.cs†L1-L6】【F:frazer-api/src/Infrastructure/Adapters/FakeAdapters.cs†L43-L59】【F:frazer-api/src/Api/appsettings.json†L30-L32】
- **CardPointe Payments Gateway** – Payment processing stubs authorize a decimal amount and later capture by authorization code using merchant credentials. Replacing the fake gateway with CardPointe or another PCI-compliant provider will enable real settlement and status updates.【F:frazer-api/src/Application/Interfaces/Adapters/ICardPointePayments.cs†L1-L7】【F:frazer-api/src/Infrastructure/Adapters/FakeAdapters.cs†L61-L84】【F:frazer-api/src/Infrastructure/Services/FakeDomainServices.cs†L640-L663】【F:frazer-api/src/Api/appsettings.json†L33-L37】
- **Background Processing (Hangfire)** – Recurring jobs rely on Hangfire storage. The infrastructure falls back to in-memory storage if SQL Server is unreachable; production deployments need a reliable Hangfire-compatible database (SQL Server recommended).【F:frazer-api/src/Infrastructure/DependencyInjection.cs†L36-L78】
- **Operational Database (SQL Server)** – All domain services persist to `AppDbContext` using the configured SQL Server connection string, providing parity with the Frazer desktop’s data store expectations.【F:frazer-api/src/Infrastructure/DependencyInjection.cs†L28-L34】【F:frazer-api/src/Api/appsettings.json†L9-L11】
- **Observability** – OpenTelemetry traces/metrics and Serilog console logging are enabled; you may integrate exporters (e.g., Jaeger, Prometheus) by extending this pipeline to match your production monitoring stack.【F:frazer-api/src/Api/Program.cs†L21-L135】

## Running the Rewrite Locally
1. **API** – From `frazer-api/src/Api`, run `dotnet run` to start `FrazerDealer.Api`. It registers Swagger, JWT auth, Hangfire jobs, and seeds the SQL database before serving requests.【F:frazer-api/src/Api/Program.cs†L19-L147】
2. **UI** – From `frazer-ui`, install dependencies (`npm install`) and serve the Ionic app (`npm start` or `ionic serve`). The UI targets the API base URL defined in the environment file (`https://localhost:5001` by default).【F:frazer-ui/src/app/core/api-client.service.ts†L5-L24】【F:frazer-ui/src/environments/environment.ts†L1-L4】
3. **Seed & Fixtures** – The API seeders populate representative vehicles, customers, sales, and payments, while the UI fixtures supply mock data when the API is not yet wired, allowing teams to validate flows without the legacy executable.【F:frazer-api/src/Infrastructure/DependencyInjection.cs†L81-L111】【F:frazer-ui/src/app/data/fixtures.ts†L16-L170】

With these components configured, the rewrite delivers the dealership inventory, CRM, sales, reporting, and automation features expected from Frazer while documenting the external providers that must be substituted for production readiness.
